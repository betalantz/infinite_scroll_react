(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,o){e.exports=o(28)},17:function(e,t,o){},27:function(e,t,o){},28:function(e,t,o){"use strict";o.r(t);var n=o(0),a=o.n(n),i=o(4),s=o.n(i),l=(o(17),o(1)),r=o(5),c=o(6),d=o(9),h=o(7),u=o(10),m=o(8),p=o.n(m),g=(o(27),function(e){function t(e){var o;return Object(r.a)(this,t),(o=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={error:!1,hasMore:!0,isLoading:!1,isTop:!1,endPage:1,photos:[]},o}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){this.loadPhotos()}},{key:"componentDidMount",value:function(){var e=this;this.refs.myscroll.addEventListener("scroll",function(){e.refs.myscroll.scrollTop+e.refs.myscroll.clientHeight>=e.refs.myscroll.scrollHeight&&!e.state.isLoading&&(e.setState({isTop:!1}),e.loadPhotos()),!e.refs.myscroll.scrollTop&&e.refs.myscroll.clientHeight<e.refs.myscroll.scrollHeight&&!e.state.isLoading&&(e.setState({isTop:!0}),e.loadPhotos())})}},{key:"loadPhotos",value:function(){var e=this,t=this.state,o=t.isTop,n=t.endPage,a=t.photos,i=btoa(unescape(encodeURIComponent("4iPxzSjRbGsHBVWMm8nq5KG_ooiYlxvkvfkm:"))),s=o?n-4:n+1;console.log("loadPage: ",s),this.setState({isLoading:!0},function(){p.a.get("https://gorest.co.in/public-api/photos?page=".concat(s)).set("Authorization","Basic "+i).then(function(t){var i,s,r=t.body.result.map(function(e){return{id:e.id,title:e.title,url:e.url}}),c=a;o?o&&(c.length>=80?(c.splice(60),i=[].concat(Object(l.a)(r),Object(l.a)(c)),s=n-1):(i=Object(l.a)(c),s=n)):(c.length>=80&&c.splice(0,20),i=[].concat(Object(l.a)(c),Object(l.a)(r)),s=n+1),console.log("newEndPage: ",s),e.setState({hasMore:t.body._meta.currentPage<t.body._meta.pageCount,isLoading:!1,endPage:s,photos:Object(l.a)(i)})}).catch(function(t){e.setState({error:t.message,isLoading:!1})})})}},{key:"render",value:function(){var e=this.state,t=e.error,o=e.hasMore,i=e.isLoading,s=e.photos;return a.a.createElement("div",{className:"App",ref:"myscroll",style:{height:"500px",overflow:"auto"}},s.map(function(e){return a.a.createElement(n.Fragment,{key:e.id},a.a.createElement("div",{style:{display:"flex"}},a.a.createElement("img",{alt:e.title,src:e.url,style:{borderRadius:"10px",height:100,margin:20,width:100}}),a.a.createElement("div",{style:{width:200}},a.a.createElement("h5",{style:{marginTop:0}},"Photo No. ",e.id),a.a.createElement("h6",null,"Caption: ",e.title))))}),t&&a.a.createElement("div",{style:{color:"#900"}},t),i&&a.a.createElement("div",null,"Loading..."),!o&&a.a.createElement("div",null,"No more photos to display..."))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(a.a.createElement(g,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[11,1,2]]]);
//# sourceMappingURL=main.c11e7049.chunk.js.map